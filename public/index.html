<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kroger Shopping AI Assistant</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#0066cc">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Kroger Shopping AI">
    <link rel="apple-touch-icon" href="/icon-192.png">
</head>
<body>
    <!-- Skip Links for Accessibility -->
    <div class="skip-links">
        <a href="#main-content" class="skip-link">Skip to main content</a>
        <a href="#search-form" class="skip-link">Skip to search</a>
        <a href="#results" class="skip-link">Skip to results</a>
        <a href="#cart" class="skip-link">Skip to cart</a>
    </div>

    <!-- Screen Reader Live Regions -->
    <div aria-live="polite" aria-atomic="true" class="sr-live-region" id="sr-status"></div>
    <div aria-live="assertive" aria-atomic="true" class="sr-live-region" id="sr-alerts"></div>

    <header role="banner">
        <div class="header-content">
            <h1>‚ö° Shopping AI Assistant - RAPID UPDATES DEMO ‚ö°</h1>
            <div class="kroger-logo">Kroger</div>
        </div>
    </header>

    <!-- Tab Navigation -->
    <nav class="tab-nav" role="navigation" aria-label="Main navigation">
        <button class="tab-button active" onclick="showTab('search')" 
                role="tab" aria-selected="true" aria-controls="search-tab"
                aria-label="Search Products">
            <span aria-hidden="true">üîç</span> Search Products
        </button>
        <button class="tab-button" onclick="showTab('list')" 
                role="tab" aria-selected="false" aria-controls="list-tab"
                aria-label="Shopping List">
            <span aria-hidden="true">üìù</span> Shopping List
        </button>
        <button class="tab-button" onclick="showTab('cart')" 
                role="tab" aria-selected="false" aria-controls="cart-tab"
                aria-label="Shopping Cart">
            <span aria-hidden="true">üõí</span> Cart
        </button>
        <button class="tab-button" onclick="showTab('settings')" 
                role="tab" aria-selected="false" aria-controls="settings-tab"
                aria-label="Settings">
            <span aria-hidden="true">‚öôÔ∏è</span> Settings
        </button>
    </nav>

    <main id="main-content" role="main">
        <!-- Search Products Tab -->
        <div id="search-tab" class="tab-content active">
            <!-- Enhanced Search Header -->
            <div class="search-header">
                <!-- Breadcrumb Navigation -->
                <nav class="breadcrumb-nav" id="breadcrumbNav" style="display: none;" aria-label="Search navigation">
                    <ol class="breadcrumb-list">
                        <li class="breadcrumb-item">
                            <a href="#" onclick="clearSearchAndBreadcrumbs(); return false;">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                                    <polyline points="9,22 9,12 15,12 15,22"></polyline>
                                </svg>
                                Home
                            </a>
                        </li>
                        <li class="breadcrumb-item active" id="currentSearchCrumb">
                            <span>Search Results</span>
                        </li>
                    </ol>
                </nav>

                <!-- Advanced Search Interface -->
                <form id="search-form" role="search" aria-label="Product search">
                    <div class="search-bar-container">
                        <div class="search-input-wrapper">
                            <svg class="search-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                                <circle cx="11" cy="11" r="8"></circle>
                                <path d="m21 21-4.35-4.35"></path>
                            </svg>
                            <label for="searchTerm" class="sr-only">Search for products, brands, or categories</label>
                            <input type="text" id="searchTerm" 
                                   placeholder="Search for products, brands, or categories..." 
                                   onkeypress="handleSearchEnter(event)" 
                                   oninput="handleSearchInput(event)"
                                   onfocus="handleSearchFocus(event)"
                                   onblur="handleSearchBlur(event)"
                                   autocomplete="off"
                                   aria-describedby="search-help"
                                   aria-expanded="false"
                                   aria-haspopup="listbox"
                                   role="combobox"
                                   aria-owns="searchSuggestions">
                            <div id="search-help" class="sr-only">Type to search for products. Use arrow keys to navigate suggestions when available.</div>
                            <div id="searchLoader" class="search-loader" style="display: none;" aria-hidden="true"></div>
                            <button type="button" onclick="clearSearch()" class="clear-search-btn" id="clearSearchBtn" style="display: none;" aria-label="Clear search">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                                    <line x1="18" y1="6" x2="6" y2="18"></line>
                                    <line x1="6" y1="6" x2="18" y2="18"></line>
                                </svg>
                            </button>
                        </div>
                        
                        
                        <button type="submit" onclick="searchProducts(); return false;" class="search-btn" aria-describedby="search-status">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                                <circle cx="11" cy="11" r="8"></circle>
                                <path d="m21 21-4.35-4.35"></path>
                            </svg>
                            <span>Search</span>
                        </button>
                    </div>
                    <div id="search-status" class="sr-only" aria-live="polite"></div>
                </form>
                
                <!-- Enhanced Search Suggestions with Categories -->
                <div id="searchSuggestions" class="search-suggestions" style="display: none;" role="listbox" aria-label="Search suggestions">
                    <div class="suggestions-content">
                        <div class="suggestion-section" id="productSuggestions" style="display: none;">
                            <h4 class="suggestion-header">Products</h4>
                            <ul class="suggestion-list" role="group"></ul>
                        </div>
                        <div class="suggestion-section" id="categorySuggestions" style="display: none;">
                            <h4 class="suggestion-header">Categories</h4>
                            <ul class="suggestion-list" role="group"></ul>
                        </div>
                        <div class="suggestion-section" id="brandSuggestions" style="display: none;">
                            <h4 class="suggestion-header">Brands</h4>
                            <ul class="suggestion-list" role="group"></ul>
                        </div>
                    </div>
                </div>
                
                <!-- Enhanced Recent Searches and Trending -->
                <div id="searchHistory" class="search-history" style="display: none;">
                    <div class="search-history-header">
                        <h4>Recent & Trending</h4>
                        <button class="clear-history-btn" onclick="clearSearchHistory()" aria-label="Clear search history">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="18" y1="6" x2="6" y2="18"></line>
                                <line x1="6" y1="6" x2="18" y2="18"></line>
                            </svg>
                        </button>
                    </div>
                    <div class="history-content">
                        <div class="recent-searches-section" id="recentSearchesSection" style="display: none;">
                            <h5>Recent Searches</h5>
                            <div class="recent-items"></div>
                        </div>
                        <div class="trending-searches-section" id="trendingSearchesSection">
                            <h5>Trending Now</h5>
                            <div class="trending-items">
                                <button class="trending-item" onclick="searchForTerm('organic vegetables')">
                                    <span class="trending-icon">üî•</span>
                                    Organic Vegetables
                                </button>
                                <button class="trending-item" onclick="searchForTerm('protein bars')">
                                    <span class="trending-icon">‚≠ê</span>
                                    Protein Bars
                                </button>
                                <button class="trending-item" onclick="searchForTerm('holiday cookies')">
                                    <span class="trending-icon">üéÑ</span>
                                    Holiday Cookies
                                </button>
                                <button class="trending-item" onclick="searchForTerm('sale items')">
                                    <span class="trending-icon">üí∞</span>
                                    Sale Items
                                </button>
                            </div>
                        </div>
                        <div class="category-quickpicks">
                            <h5>Quick Categories</h5>
                            <div class="category-chips">
                                <button class="category-chip" onclick="searchForTerm('dairy')">
                                    <span class="category-icon">üßÄ</span>
                                    Dairy
                                </button>
                                <button class="category-chip" onclick="searchForTerm('meat')">
                                    <span class="category-icon">ü•©</span>
                                    Meat
                                </button>
                                <button class="category-chip" onclick="searchForTerm('produce')">
                                    <span class="category-icon">üçé</span>
                                    Produce
                                </button>
                                <button class="category-chip" onclick="searchForTerm('bakery')">
                                    <span class="category-icon">üçû</span>
                                    Bakery
                                </button>
                                <button class="category-chip" onclick="searchForTerm('frozen')">
                                    <span class="category-icon">üßä</span>
                                    Frozen
                                </button>
                                <button class="category-chip" onclick="searchForTerm('pantry')">
                                    <span class="category-icon">ü•´</span>
                                    Pantry
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Search Progress Indicator -->
                <div id="searchProgress" class="search-progress" style="display: none;">
                    <div class="progress-bar">
                        <div class="progress-fill"></div>
                    </div>
                    <div class="progress-text">Searching products...</div>
                </div>
            </div>

            <!-- Unified Filter Interface -->
            <div class="unified-filter-section">
                <button class="filter-toggle-btn" id="filterToggleBtn" onclick="toggleUnifiedFilters()" aria-label="Toggle filters" title="Show/Hide Filters">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M3 6h18l-6 6v8l-6-2v-6L3 6z"></path>
                    </svg>
                    <span>Filters</span>
                    <svg class="toggle-arrow" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="6,9 12,15 18,9"></polyline>
                    </svg>
                </button>

                <!-- Unified Filter Container -->
                <div class="unified-filter-container" id="unifiedFilterContainer" style="display: none;">
                    <!-- Essential Filters - Always Visible -->
                    <div class="essential-filters">
                        <!-- Price Range - Most Important -->
                        <div class="filter-card price-filter">
                            <div class="filter-card-header">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="12" y1="1" x2="12" y2="23"></line>
                                    <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                                </svg>
                                <span class="filter-label">Price Range</span>
                            </div>
                            <div class="filter-card-content">
                                <div class="price-inputs">
                                    <input type="number" id="minPrice" class="price-input" placeholder="Min" min="0" step="0.01" onchange="filterProducts()">
                                    <span class="price-separator">-</span>
                                    <input type="number" id="maxPrice" class="price-input" placeholder="Max" min="0" step="0.01" onchange="filterProducts()">
                                </div>
                            </div>
                        </div>

                        <!-- Brand Filter -->
                        <div class="filter-card brand-filter">
                            <div class="filter-card-header">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"></path>
                                </svg>
                                <span class="filter-label">Brand</span>
                            </div>
                            <div class="filter-card-content">
                                <select id="filterBrand" onchange="filterProducts()" class="filter-select">
                                    <option value="">All Brands</option>
                                </select>
                            </div>
                        </div>

                        <!-- Quick Toggle Filters -->
                        <div class="filter-card toggle-filters">
                            <div class="filter-card-header">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m0 0V11a1 1 0 011-1h2a1 1 0 011 1v10m-4 0h4"></path>
                                </svg>
                                <span class="filter-label">Quick Filters</span>
                            </div>
                            <div class="filter-card-content">
                                <div class="toggle-filter-chips">
                                    <label class="toggle-chip sale-chip">
                                        <input type="checkbox" id="onSaleOnly" onchange="filterProducts()">
                                        <span class="chip-content">
                                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"></path>
                                            </svg>
                                            On Sale
                                        </span>
                                    </label>
                                    <label class="toggle-chip stock-chip">
                                        <input type="checkbox" id="inStockOnly" onchange="filterProducts()">
                                        <span class="chip-content">
                                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                <circle cx="12" cy="12" r="10"></circle>
                                                <path d="m9 12 2 2 4-4"></path>
                                            </svg>
                                            In Stock
                                        </span>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- Sort Filter -->
                        <div class="filter-card sort-filter">
                            <div class="filter-card-header">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M3 6h18l-6 6v8l-6-2v-6L3 6z"></path>
                                </svg>
                                <span class="filter-label">Sort</span>
                            </div>
                            <div class="filter-card-content">
                                <select id="sortBy" onchange="sortProducts()" class="filter-select">
                                    <option value="">Featured</option>
                                    <option value="price-low">Price: Low to High</option>
                                    <option value="price-high">Price: High to Low</option>
                                    <option value="name">Name: A-Z</option>
                                    <option value="brand">Brand</option>
                                    <option value="discount">Biggest Discount</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Show More Filters Button -->
                    <div class="show-more-filters-section">
                        <button class="show-more-btn" id="showMoreFiltersBtn" onclick="toggleAdvancedFilters()" aria-expanded="false">
                            <span class="show-more-text">Show More Filters</span>
                            <svg class="show-more-arrow" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="6,9 12,15 18,9"></polyline>
                            </svg>
                        </button>
                    </div>

                    <!-- Advanced Filters - Hidden by Default -->
                    <div class="advanced-filters" id="advancedFilters" style="display: none;">
                        <!-- Quick Action Chips -->
                        <div class="filter-card quick-chips-filter">
                            <div class="filter-card-header">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"></path>
                                </svg>
                                <span class="filter-label">Quick Filters</span>
                            </div>
                            <div class="filter-card-content">
                                <div class="quick-filter-chips">
                                    <button class="quick-filter-chip" onclick="applyQuickFilter('under-5')" data-filter="under-5">
                                        Under $5
                                    </button>
                                    <button class="quick-filter-chip" onclick="applyQuickFilter('organic')" data-filter="organic">
                                        Organic
                                    </button>
                                    <button class="quick-filter-chip" onclick="applyQuickFilter('deals')" data-filter="deals">
                                        Best Deals
                                    </button>
                                    <button class="quick-filter-chip" onclick="applyQuickFilter('popular')" data-filter="popular">
                                        Popular
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Categories Filter -->
                        <div class="filter-card categories-filter">
                            <div class="filter-card-header">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="3" y="3" width="7" height="7"></rect>
                                    <rect x="14" y="3" width="7" height="7"></rect>
                                    <rect x="14" y="14" width="7" height="7"></rect>
                                    <rect x="3" y="14" width="7" height="7"></rect>
                                </svg>
                                <span class="filter-label">Categories</span>
                            </div>
                            <div class="filter-card-content">
                                <div class="category-list" id="categoriesList">
                                    <!-- Categories will be populated dynamically -->
                                </div>
                            </div>
                        </div>

                        <!-- Availability Filter -->
                        <div class="filter-card availability-filter">
                            <div class="filter-card-header">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                                    <circle cx="12" cy="10" r="3"></circle>
                                </svg>
                                <span class="filter-label">Availability</span>
                            </div>
                            <div class="filter-card-content">
                                <div class="availability-options">
                                    <label class="availability-checkbox">
                                        <input type="checkbox" id="inStoreOnly">
                                        <span class="checkmark"></span>
                                        <span class="label-text">In Store Only</span>
                                    </label>
                                    <label class="availability-checkbox">
                                        <input type="checkbox" id="deliveryAvailable">
                                        <span class="checkmark"></span>
                                        <span class="label-text">Delivery Available</span>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- View Controls -->
                        <div class="filter-card view-controls-filter">
                            <div class="filter-card-header">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="3" y="3" width="7" height="7"></rect>
                                    <rect x="14" y="3" width="7" height="7"></rect>
                                    <rect x="14" y="14" width="7" height="7"></rect>
                                    <rect x="3" y="14" width="7" height="7"></rect>
                                </svg>
                                <span class="filter-label">View Options</span>
                            </div>
                            <div class="filter-card-content">
                                <div class="view-controls">
                                    <div class="layout-toggle">
                                        <button class="layout-option active" onclick="setGridLayout('standard')" data-layout="standard" title="Grid View">
                                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                <rect x="3" y="3" width="7" height="7"></rect>
                                                <rect x="14" y="3" width="7" height="7"></rect>
                                                <rect x="14" y="14" width="7" height="7"></rect>
                                                <rect x="3" y="14" width="7" height="7"></rect>
                                            </svg>
                                        </button>
                                        <button class="layout-option" onclick="setGridLayout('masonry')" data-layout="masonry" title="Masonry View">
                                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                <rect x="3" y="3" width="7" height="9"></rect>
                                                <rect x="14" y="3" width="7" height="5"></rect>
                                                <rect x="14" y="12" width="7" height="9"></rect>
                                                <rect x="3" y="16" width="7" height="5"></rect>
                                            </svg>
                                        </button>
                                        <button class="layout-option" onclick="setView('table')" data-layout="table" title="Table View">
                                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                <line x1="8" y1="6" x2="21" y2="6"></line>
                                                <line x1="8" y1="12" x2="21" y2="12"></line>
                                                <line x1="8" y1="18" x2="21" y2="18"></line>
                                                <line x1="3" y1="6" x2="3.01" y2="6"></line>
                                                <line x1="3" y1="12" x2="3.01" y2="12"></line>
                                                <line x1="3" y1="18" x2="3.01" y2="18"></line>
                                            </svg>
                                        </button>
                                    </div>
                                    <div class="grid-density-controls">
                                        <label class="density-label">Density:</label>
                                        <input type="range" id="gridDensity" class="density-slider" min="2" max="6" value="4" onchange="updateGridDensity(this.value)">
                                        <span id="densityLabel" class="density-value">4</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Active Filters Display -->
            <div id="activeFilters" class="active-filters" style="display: none;">
                <div class="active-filters-header">
                    <span>Active Filters:</span>
                    <button onclick="clearAllFilters()" class="clear-all-btn">Clear All</button>
                </div>
                <div class="active-filter-tags"></div>
            </div>

            <!-- Enhanced Search Results Header -->
            <div id="searchResultsHeader" class="results-header" style="display: none;">
                <div class="results-summary">
                    <div class="results-info">
                        <span id="resultsCount" class="results-count">0 products found</span>
                        <span id="searchTiming" class="search-timing"></span>
                        <span id="searchQuery" class="search-query"></span>
                    </div>
                    <div class="search-suggestions-line" id="searchSuggestionsLine" style="display: none;">
                        <span class="suggestion-text">Did you mean:</span>
                        <button class="suggestion-link" id="suggestionLink" onclick=""></button>
                    </div>
                </div>
                <div class="results-actions">
                    <div class="bulk-actions">
                        <button onclick="selectAllProducts()" class="bulk-action-btn" id="selectAllBtn">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="9,11 12,14 22,4"></polyline>
                                <path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"></path>
                            </svg>
                            Select All
                        </button>
                        <button onclick="addSelectedToCart()" class="bulk-action-btn primary" id="addSelectedBtn" disabled>
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="9" cy="21" r="1"></circle>
                                <circle cx="20" cy="21" r="1"></circle>
                                <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                            </svg>
                            Add Selected (<span id="selectedCount">0</span>)
                        </button>
                        <button onclick="compareSelected()" class="bulk-action-btn secondary" id="compareBtn" disabled>
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M9 11H5a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h4a2 2 0 0 0 2-2v-7a2 2 0 0 0-2-2z"></path>
                                <path d="M21 11h-4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h4a2 2 0 0 0 2-2v-7a2 2 0 0 0-2-2z"></path>
                                <path d="M7 21V9a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v12"></path>
                            </svg>
                            Compare
                        </button>
                    </div>
                    <div class="utility-actions">
                        <button onclick="exportResults()" class="utility-btn" title="Export results">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-15"></path>
                                <polyline points="7,10 12,15 17,10"></polyline>
                                <line x1="12" y1="15" x2="12" y2="3"></line>
                            </svg>
                        </button>
                        <button onclick="shareResults()" class="utility-btn" title="Share results">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="18" cy="5" r="3"></circle>
                                <circle cx="6" cy="12" r="3"></circle>
                                <circle cx="18" cy="19" r="3"></circle>
                                <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
                                <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
                            </svg>
                        </button>
                        <button onclick="printResults()" class="utility-btn" title="Print results">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="6,9 6,2 18,2 18,9"></polyline>
                                <path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"></path>
                                <polyline points="6,14 18,14 18,22 6,22 6,14"></polyline>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>

            <!-- No Results State -->
            <div id="noResultsState" class="no-results" style="display: none;">
                <div class="no-results-content">
                    <div class="no-results-icon">
                        <svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
                            <circle cx="11" cy="11" r="8"></circle>
                            <path d="m21 21-4.35-4.35"></path>
                        </svg>
                    </div>
                    <h3 class="no-results-title">No products found</h3>
                    <p class="no-results-message">We couldn't find any products matching your search.</p>
                    <div class="no-results-suggestions">
                        <h4>Try these suggestions:</h4>
                        <ul class="suggestion-list">
                            <li>Check your spelling and try again</li>
                            <li>Use fewer or different keywords</li>
                            <li>Browse our popular categories below</li>
                        </ul>
                        <div class="suggested-searches">
                            <h5>Popular searches:</h5>
                            <div class="suggested-terms">
                                <button class="suggested-term" onclick="searchForTerm('milk')">Milk</button>
                                <button class="suggested-term" onclick="searchForTerm('bread')">Bread</button>
                                <button class="suggested-term" onclick="searchForTerm('eggs')">Eggs</button>
                                <button class="suggested-term" onclick="searchForTerm('chicken')">Chicken</button>
                                <button class="suggested-term" onclick="searchForTerm('bananas')">Bananas</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Main Search Results -->
            <div class="search-results-main">
                <div id="searchResults" class="product-grid"></div>
                
                <!-- Back to Top Button -->
                <button class="back-to-top" id="backToTopBtn" onclick="scrollToTop()" style="display: none;" aria-label="Scroll to top">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="12" y1="19" x2="12" y2="5"></line>
                        <polyline points="5,12 12,5 19,12"></polyline>
                    </svg>
                </button>
            </div>
            <div id="tableResults" class="product-table-container" style="display: none;">
                <!-- Table Controls Header -->
                <div class="table-controls-header">
                    <div class="table-info">
                        <span id="tableResultsCount">0 products</span>
                        <div class="table-view-options">
                            <label class="compact-toggle">
                                <input type="checkbox" id="compactTableView" onchange="toggleCompactTable()">
                                <span class="toggle-label">Compact View</span>
                            </label>
                        </div>
                    </div>
                    <div class="table-actions">
                        <button class="table-action-btn" onclick="expandAllRows()" title="Expand All">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="7,13 12,18 17,13"></polyline>
                                <polyline points="7,6 12,11 17,6"></polyline>
                            </svg>
                        </button>
                        <button class="table-action-btn" onclick="collapseAllRows()" title="Collapse All">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="17,11 12,6 7,11"></polyline>
                                <polyline points="17,18 12,13 7,18"></polyline>
                            </svg>
                        </button>
                        <button class="table-action-btn" onclick="exportTableData()" title="Export Table">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                <polyline points="7,10 12,15 17,10"></polyline>
                                <line x1="12" y1="15" x2="12" y2="3"></line>
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Enhanced Table -->
                <div class="table-wrapper">
                    <table class="enhanced-product-table">
                        <thead>
                            <tr>
                                <th class="select-column">
                                    <label class="select-all-checkbox">
                                        <input type="checkbox" id="selectAllTable" onchange="toggleSelectAllTable()">
                                        <span class="checkmark"></span>
                                    </label>
                                </th>
                                <th class="image-column">Image</th>
                                <th class="sortable-column" onclick="sortByColumn('name')" data-sort="name">
                                    <div class="column-header">
                                        <span>Product</span>
                                        <div class="sort-indicators">
                                            <span class="sort-arrow sort-asc">‚ñ≤</span>
                                            <span class="sort-arrow sort-desc">‚ñº</span>
                                        </div>
                                    </div>
                                </th>
                                <th class="sortable-column" onclick="sortByColumn('brand')" data-sort="brand">
                                    <div class="column-header">
                                        <span>Brand</span>
                                        <div class="sort-indicators">
                                            <span class="sort-arrow sort-asc">‚ñ≤</span>
                                            <span class="sort-arrow sort-desc">‚ñº</span>
                                        </div>
                                    </div>
                                </th>
                                <th class="sortable-column" onclick="sortByColumn('size')" data-sort="size">
                                    <div class="column-header">
                                        <span>Size</span>
                                        <div class="sort-indicators">
                                            <span class="sort-arrow sort-asc">‚ñ≤</span>
                                            <span class="sort-arrow sort-desc">‚ñº</span>
                                        </div>
                                    </div>
                                </th>
                                <th class="sortable-column price-column" onclick="sortByColumn('price')" data-sort="price">
                                    <div class="column-header">
                                        <span>Price</span>
                                        <div class="sort-indicators">
                                            <span class="sort-arrow sort-asc">‚ñ≤</span>
                                            <span class="sort-arrow sort-desc">‚ñº</span>
                                        </div>
                                    </div>
                                </th>
                                <th class="quantity-column">Quantity</th>
                                <th class="actions-column">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="tableBody"></tbody>
                    </table>
                </div>

                <!-- Table Pagination -->
                <div class="table-pagination" id="tablePagination" style="display: none;">
                    <div class="pagination-info">
                        <span>Showing <span id="paginationStart">1</span>-<span id="paginationEnd">10</span> of <span id="paginationTotal">0</span> products</span>
                    </div>
                    <div class="pagination-controls">
                        <button class="pagination-btn" onclick="goToTablePage(1)" id="firstPageBtn">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="11,17 6,12 11,7"></polyline>
                                <polyline points="18,17 13,12 18,7"></polyline>
                            </svg>
                        </button>
                        <button class="pagination-btn" onclick="goToTablePage(currentTablePage - 1)" id="prevPageBtn">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="15,18 9,12 15,6"></polyline>
                            </svg>
                        </button>
                        <div class="page-numbers" id="pageNumbers"></div>
                        <button class="pagination-btn" onclick="goToTablePage(currentTablePage + 1)" id="nextPageBtn">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="9,18 15,12 9,6"></polyline>
                            </svg>
                        </button>
                        <button class="pagination-btn" onclick="goToTablePage(totalTablePages)" id="lastPageBtn">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="13,17 18,12 13,7"></polyline>
                                <polyline points="6,17 11,12 6,7"></polyline>
                            </svg>
                        </button>
                    </div>
                    <div class="page-size-selector">
                        <label>
                            Items per page:
                            <select id="tablePagSize" onchange="changeTablePageSize()">
                                <option value="10">10</option>
                                <option value="25" selected>25</option>
                                <option value="50">50</option>
                                <option value="100">100</option>
                            </select>
                        </label>
                    </div>
                </div>
            </div>
        </div>

        <!-- Shopping List Tab -->
        <div id="list-tab" class="tab-content">
            <div class="list-controls">
                <div class="input-group">
                    <input type="text" id="newItem" placeholder="Add item to list..." onkeypress="handleListEnter(event)">
                    <button onclick="addToList()">Add</button>
                </div>
                <div class="list-actions">
                    <button onclick="findDeals()" class="btn-primary">üí∞ Find Best Deals</button>
                    <button onclick="buildSmartList()" class="btn-secondary">üíµ Optimize for Budget</button>
                    <div class="budget-input">
                        <label>Budget: $</label>
                        <input type="number" id="budget" placeholder="50" value="50">
                    </div>
                </div>
            </div>
            
            <div class="shopping-list-container">
                <h3>Your Shopping List</h3>
                <ul id="shoppingItems"></ul>
                <div id="listResults"></div>
            </div>
        </div>

        <!-- Cart Tab -->
        <div id="cart-tab" class="tab-content">
            <div class="cart-header">
                <div class="cart-title-section">
                    <h2>Shopping Cart</h2>
                    <!-- cart count badge removed per design cleanup -->
                </div>
                <div class="cart-actions-header">
                    <button class="clear-cart-btn" onclick="clearCart()" id="clearCartBtn" style="display: none;">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="3,6 5,6 21,6"></polyline>
                            <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                        </svg>
                        Clear Cart
                    </button>
                    <button class="save-for-later-btn" onclick="saveCartForLater()" id="saveCartBtn" style="display: none;">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path>
                        </svg>
                        Save for Later
                    </button>
                </div>
            </div>

            <div class="cart-content">
                <div class="cart-items-container">
                    <div id="cartItems" class="cart-items">
                        <!-- Empty State -->
                        <div class="empty-cart-state" id="emptyCartState">
                            <div class="empty-cart-icon">
                                <svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
                                    <circle cx="9" cy="21" r="1"></circle>
                                    <circle cx="20" cy="21" r="1"></circle>
                                    <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                                </svg>
                            </div>
                            <h3>Your cart is empty</h3>
                            <p>Add some delicious items from our product search to get started!</p>
            <button class="browse-products-btn" onclick="showTab('search')">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="11" cy="11" r="8"></circle>
                                    <path d="m21 21-4.35-4.35"></path>
                                </svg>
                                Browse Products
                            </button>
                        </div>

                        <!-- Cart Items will be populated here -->
                    </div>

                    <!-- Suggested Items Section -->
                    <div id="suggestedItems" class="suggested-items" style="display: none;">
                        <h4>You might also like</h4>
                        <div class="suggested-products"></div>
                    </div>
                </div>

                <div class="cart-sidebar">
                    <!-- Order Summary -->
                    <div class="order-summary">
                        <h3>Order Summary</h3>
                        <div class="summary-line">
                            <span>Subtotal (<span id="summaryItemCount">0</span> items):</span>
                            <span id="cartSubtotal">$0.00</span>
                        </div>
                        <div class="summary-line savings-line" id="savingsLine" style="display: none;">
                            <span>You saved:</span>
                            <span class="savings-amount" id="totalSavings">$0.00</span>
                        </div>
                        <div class="summary-line">
                            <span>Estimated tax:</span>
                            <span id="estimatedTax">$0.00</span>
                        </div>
                        <div class="summary-line total-line">
                            <span>Total:</span>
                            <span id="cartTotal">$0.00</span>
                        </div>

                        <!-- Promo Code Section -->
                        <div class="promo-section">
                            <div class="promo-input-group">
                                <input type="text" id="promoCode" placeholder="Enter promo code">
                                <button onclick="applyPromoCode()" class="apply-promo-btn">Apply</button>
                            </div>
                        </div>

                        <!-- Checkout Button -->
                        <button class="checkout-btn" onclick="checkout()" id="checkoutBtn" disabled>
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="1" y="3" width="15" height="13"></rect>
                                <path d="m16 8 2 2-2 2"></path>
                                <path d="M21 12H9"></path>
                            </svg>
                            Proceed to Checkout
                        </button>

                        <!-- Secure Checkout Notice -->
                        <div class="secure-notice">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                                <circle cx="12" cy="16" r="1"></circle>
                                <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                            </svg>
                            Secure checkout powered by Kroger
                        </div>
                    </div>

                    <!-- Delivery Options -->
                    <div class="delivery-options">
                        <h4>Delivery Options</h4>
                        <div class="delivery-option">
                            <input type="radio" id="pickup" name="delivery" value="pickup" checked>
                            <label for="pickup">
                                <div class="option-header">
                                    <span class="option-title">Store Pickup</span>
                                    <span class="option-price">FREE</span>
                                </div>
                                <div class="option-description">Ready in 2 hours</div>
                            </label>
                        </div>
                        <div class="delivery-option">
                            <input type="radio" id="delivery" name="delivery" value="delivery">
                            <label for="delivery">
                                <div class="option-header">
                                    <span class="option-title">Home Delivery</span>
                                    <span class="option-price">$9.99</span>
                                </div>
                                <div class="option-description">Same day delivery available</div>
                            </label>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Settings Tab -->
        <div id="settings-tab" class="tab-content">
            <div class="settings-container">
                <div class="settings-header">
                    <h2>‚öôÔ∏è Settings & Preferences</h2>
                    <p class="settings-subtitle">Customize your shopping experience</p>
                </div>
                
                <!-- Store Location Section -->
                <div class="settings-section">
                    <div class="section-header">
                        <h3>üìç Store Location</h3>
                        <!-- Default store badge removed per design cleanup -->
                    </div>
                    
                    
                    <div class="zip-code-section">
                        <label for="zipCode" class="input-label">
                            <span class="label-icon">üìÆ</span>
                            ZIP Code
                            <span class="editable-indicator">‚úèÔ∏è Editable</span>
                        </label>
                        <div class="zip-input-group">
                            <div class="zip-input-wrapper">
                                <input 
                                    type="text" 
                                    id="zipCode" 
                                    placeholder="Enter your ZIP code (e.g., 43123)" 
                                    value="43123"
                                    maxlength="5"
                                    pattern="[0-9]{5}"
                                    onkeypress="handleZipEnter(event)"
                                    oninput="validateZipCode(this)"
                                    onfocus="highlightZipInput(this)"
                                    onblur="unhighlightZipInput(this)"
                                    class="zip-input editable-field"
                                    title="Click to edit your ZIP code"
                                >
                                <div class="input-border-highlight"></div>
                            </div>
                            <button 
                                class="find-stores-btn" 
                                onclick="findStores()"
                                id="findStoresBtn"
                                title="Search for stores in this ZIP code"
                            >
                                <span class="btn-icon">üîç</span>
                                Find Stores
                            </button>
                        </div>
                        <div class="zip-validation" id="zipValidation" style="display: none;"></div>
                        <div class="zip-help-text">
                            Enter a 5-digit ZIP code to find nearby Kroger stores. Stores will automatically search when you enter a valid ZIP code.
                        </div>
                    </div>
                    
                    <div class="store-selection-section">
                        <label class="input-label">
                            <span class="label-icon">üè™</span>
                            Available Stores
                            <span class="store-count" id="storeCount" style="display: none;"></span>
                        </label>
                        
                        <div class="store-list-container">
                            <select id="storeList" size="8" onchange="selectStore()">
                                <option value="" disabled>Enter a ZIP code to find stores</option>
                            </select>
                            
                            <div class="store-list-actions" id="storeListActions" style="display: none;">
                                <button 
                                    class="refresh-stores-btn" 
                                    onclick="findStores()" 
                                    title="Refresh store list">
                                    <span class="btn-icon">üîÑ</span>
                                    Refresh
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div id="selectedStore" class="selected-store-card" style="display: none;">
                        <div class="store-card-header">
                            <h4 class="store-name"></h4>
                            <div class="store-actions">
                                <button 
                                    class="set-default-btn" 
                                    onclick="setDefaultStore()"
                                    id="setDefaultBtn"
                                >
                                    <span class="btn-icon">‚≠ê</span>
                                    Set as Default
                                </button>
                                <button 
                                    class="remove-default-btn" 
                                    onclick="removeDefaultStore()"
                                    id="removeDefaultBtn"
                                    style="display: none;"
                                >
                                    <span class="btn-icon">‚ùå</span>
                                    Remove Default
                                </button>
                            </div>
                        </div>
                        <div class="store-details">
                            <div class="store-address">
                                <span class="detail-icon">üìç</span>
                                <span class="address-text"></span>
                            </div>
                            <div class="store-phone">
                                <span class="detail-icon">üìû</span>
                                <span class="phone-text"></span>
                            </div>
                            <div class="store-status">
                                <span class="detail-icon">‚úÖ</span>
                                <span class="status-text">Currently Selected</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- User Preferences Section -->
                <div class="settings-section">
                    <div class="section-header">
                        <h3>üéØ Shopping Preferences</h3>
                    </div>
                    
                    <div class="preferences-grid">
                        <div class="preference-item">
                            <label class="preference-label">
                                <input type="checkbox" id="autoSaveCart" onchange="savePreference('autoSaveCart', this.checked)">
                                <span class="checkmark"></span>
                                <div class="preference-info">
                                    <span class="preference-title">Auto-save cart</span>
                                    <span class="preference-description">Automatically save your cart between sessions</span>
                                </div>
                            </label>
                        </div>
                        
                        <div class="preference-item">
                            <label class="preference-label">
                                <input type="checkbox" id="showDeals" onchange="savePreference('showDeals', this.checked)" checked>
                                <span class="checkmark"></span>
                                <div class="preference-info">
                                    <span class="preference-title">Highlight deals</span>
                                    <span class="preference-description">Show sale prices and discount badges prominently</span>
                                </div>
                            </label>
                        </div>
                        
                        <div class="preference-item">
                            <label class="preference-label">
                                <input type="checkbox" id="compactView" onchange="savePreference('compactView', this.checked)">
                                <span class="checkmark"></span>
                                <div class="preference-info">
                                    <span class="preference-title">Compact product view</span>
                                    <span class="preference-description">Show more products per row</span>
                                </div>
                            </label>
                        </div>
                        
                        <div class="preference-item">
                            <label class="preference-label">
                                <input type="checkbox" id="enableNotifications" onchange="savePreference('enableNotifications', this.checked)">
                                <span class="checkmark"></span>
                                <div class="preference-info">
                                    <span class="preference-title">Enable notifications</span>
                                    <span class="preference-description">Get notified about deals and cart updates</span>
                                </div>
                            </label>
                        </div>
                    </div>
                </div>
                
                <!-- Data Management Section -->
                <div class="settings-section">
                    <div class="section-header">
                        <h3>üíæ Data Management</h3>
                    </div>
                    
                    <div class="data-actions">
                        <button class="data-action-btn secondary" onclick="exportData()">
                            <span class="btn-icon">üì§</span>
                            Export Shopping Data
                        </button>
                        
                        <button class="data-action-btn secondary" onclick="clearSearchHistory()">
                            <span class="btn-icon">üóëÔ∏è</span>
                            Clear Search History
                        </button>
                        
                        <button class="data-action-btn warning" onclick="resetAllSettings()">
                            <span class="btn-icon">‚ö†Ô∏è</span>
                            Reset All Settings
                        </button>
                    </div>
                    
                    <div class="data-info">
                        <div class="info-item">
                            <span class="info-label">Default Store:</span>
                            <span class="info-value" id="currentDefaultStore">None set</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Cart Items:</span>
                            <span class="info-value" id="cartItemsCount">0</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Search History:</span>
                            <span class="info-value" id="searchHistoryCount">0 searches</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <div class="footer-content">
            <p>Items in Cart: <span id="cartCount">0</span></p>
        </div>
    </footer>

    <!-- Product Details Modal -->
    <div id="productModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeProductModal()">&times;</span>
            <div class="modal-body">
                <div class="modal-image">
                    <img id="modalImage" src="" alt="Product">
                </div>
                <div class="modal-details">
                    <h2 id="modalTitle"></h2>
                    <div class="modal-info">
                        <p><strong>Brand:</strong> <span id="modalBrand"></span></p>
                        <p><strong>Size:</strong> <span id="modalSize"></span></p>
                    </div>
                    <div class="modal-price-section">
                        <div id="modalPrice" class="modal-price"></div>
                        <div id="modalInventory" class="modal-inventory"></div>
                    </div>
                    <div class="modal-controls">
                        <div class="quantity-selector">
                            <button onclick="updateModalQuantity(-1)">-</button>
                            <input type="number" id="modalQuantity" value="1" min="1" onchange="validateModalQuantity()">
                            <button onclick="updateModalQuantity(1)">+</button>
                        </div>
                        <div class="modal-actions">
                            <button class="btn-add-cart" onclick="addToCartFromModal()" title="Add to Cart">
                                <span id="cartButtonText">üõí</span>
                            </button>
                            <button class="btn-remove-cart" onclick="removeFromCartModal()" style="display: none;" title="Remove from Cart">
                                üóëÔ∏è
                            </button>
                            <button class="btn-add-list" onclick="addToListFromModal()" title="Add to List">üìù</button>
                        </div>
                    </div>
                    <div id="modalFulfillment" class="modal-fulfillment"></div>
                    <div id="modalDescription" class="modal-description"></div>
                    <div id="modalRawData" class="modal-raw-data" style="display: none;">
                        <h3>Raw API Data</h3>
                        <pre id="modalRawJson"></pre>
                    </div>
                    <button class="toggle-raw" onclick="toggleRawData()">Show/Hide Raw Data</button>
                    <button class="modal-close-btn" onclick="closeProductModal()">Close</button>
                </div>
            </div>
        </div>
    </div>



    <!-- Product Comparison Modal -->
    <div id="comparisonModal" class="modal comparison-modal">
        <div class="modal-content comparison-modal-content">
            <div class="comparison-header">
                <h3>Product Comparison</h3>
                <button class="close" onclick="closeComparison()">&times;</button>
            </div>
            <div class="comparison-body">
                <div class="comparison-table-wrapper">
                    <table class="comparison-table" id="comparisonTable">
                        <thead>
                            <tr>
                                <th class="feature-column">Feature</th>
                                <!-- Product columns will be added dynamically -->
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Comparison rows will be added dynamically -->
                        </tbody>
                    </table>
                </div>
                <div class="comparison-actions">
                    <button class="comparison-btn add-all" onclick="addAllComparedToCart()">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="9" cy="21" r="1"></circle>
                            <circle cx="20" cy="21" r="1"></circle>
                            <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                        </svg>
                        Add All to Cart
                    </button>
                    <button class="comparison-btn export" onclick="exportComparison()">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-15"></path>
                            <polyline points="7,10 12,15 17,10"></polyline>
                            <line x1="12" y1="15" x2="12" y2="3"></line>
                        </svg>
                        Export
                    </button>
                    <button class="comparison-btn clear" onclick="clearComparison()">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="3,6 5,6 21,6"></polyline>
                            <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                        </svg>
                        Clear All
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notification Container -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- App Loader -->
    <div id="appLoader" class="app-loader" style="display: none;">
        <div class="loader-content">
            <div class="spinner"></div>
            <p>Loading application...</p>
        </div>
    </div>

    <!-- Store Migration (must run first) -->
    <script src="js/store-migration.js"></script>
    
    <!-- Core Store Persistence Architecture -->
    <script src="js/StoreManager.js"></script>
    <script src="js/ToastManager.js"></script>
    <script src="js/InitializationManager.js"></script>
    
    <!-- Original Application Scripts -->
    <script src="app.js"></script>
    
    <!-- Search Fix Script -->
    <script src="search-fix.js"></script>
    <script src="search-diagnostic.js"></script>
    
    <!-- Store Persistence Integration -->
    <script src="js/store-persistence-integration.js"></script>
    <script src="js/store-persistence-fix.js"></script>
    
    <!-- Enhancement Scripts -->
    <script src="debug-display.js"></script>
    <script src="fix-search-display.js"></script>
    <script src="fix-search-functionality.js"></script>
    <script src="store-selection-enhancement.js"></script>
    <script src="search-integration-patch.js"></script>
    <script src="fix-refresh-button.js"></script>
</body>
</html>